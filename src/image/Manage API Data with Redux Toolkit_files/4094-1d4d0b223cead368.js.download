"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4094],{14094:function(e,t,a){a.d(t,{FB:function(){return ew},ZP:function(){return eC},wS:function(){return ej}});var n,o,s=a(22830),r=a(35250),i=a(88798),c=a(21739),l=a(32542),d=a(77010),u=a(70079),g=a(32877),h=a(37334),f=a(78931),p=a(61888),m=a(70671),y=a(94968),x=a(95137),v=a(21722),k=a(39324),b=a(71209),w=a(75883),j=a(12155),C=a(60554),M=a(1454),A=a(32004),B=a(79579),T=a(89368),N=a(1821);function S(){var e=(0,x.Go)(),t=(0,C.useRouter)(),a=(0,m.Z)(),n=(0,s._)((0,u.useState)(),2),o=n[0],i=n[1],c=null!==e;if((0,u.useEffect)(function(){c||i(void 0)},[c]),!c)return null;var l=(0,r.jsx)("span",{className:"font-medium",children:e.ownerEmail}),d=e.hasActiveRequest||"success"===o;return(0,r.jsx)(T.Z,{isOpen:!0,onClose:p.noop,type:"warning",size:"custom",className:"max-w-3xl",title:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("div",{className:"text-lg",children:(0,r.jsx)(A.Z,(0,b._)((0,k._)({},_.title),{values:{workspaceName:e.accountName}}))}),(0,r.jsx)("div",{className:"text-sm font-normal",children:(0,r.jsx)(A.Z,(0,k._)({},_.subtitle))})]}),icon:M.UIZ,primaryButton:(0,r.jsx)(B.ZP.Button,{onClick:(0,v._)(function(){return(0,w.Jh)(this,function(t){switch(t.label){case 0:i("requesting"),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,x.ZP.requestWorkspaceAccess(e.accountId)];case 2:return t.sent().success&&i("success"),[3,4];case 3:return t.sent(),i("error"),[3,4];case 4:return[2]}})}),color:"primary",title:a.formatMessage(_.requestAccessButton),disabled:d}),secondaryButton:(0,r.jsx)(B.ZP.Button,{onClick:(0,v._)(function(){var e;return(0,w.Jh)(this,function(a){switch(a.label){case 0:return[4,(0,j.signOut)({redirect:!1,callbackUrl:"/auth/login?next=".concat(encodeURIComponent(t.asPath))})];case 1:return e=a.sent(),t.push(e.url),[2]}})}),color:"neutral",title:a.formatMessage(_.signOutButton)}),children:(0,r.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,r.jsx)("div",{children:(0,r.jsx)(A.Z,(0,b._)((0,k._)({},_.emailBelongsToWorkspace),{values:{email:(0,r.jsx)("span",{className:"font-medium",children:e.userEmail})}}))}),(0,r.jsx)("div",{children:d?(0,r.jsx)(A.Z,(0,b._)((0,k._)({},_.activeRequestMessage),{values:{email:l}})):"requesting"===o?(0,r.jsx)(N.Z,{}):"error"===o?(0,r.jsx)(A.Z,(0,b._)((0,k._)({},_.contactWorkspaceAdminEmail),{values:{email:l}})):null})]})})}var _={title:{id:"RequestWorkspaceAccessModal.title",defaultMessage:"Request access to {workspaceName}",description:"Title for request access modal for a workspace"},subtitle:{id:"RequestWorkspaceAccessModal.subtitle",defaultMessage:"ChatGPT Enterprise has been enabled in your workspace",description:"Subtitle for request access modal mentioning ChatGPT Enterprise"},emailBelongsToWorkspace:{id:"RequestWorkspaceAccessModal.emailBelongsToWorkspace",defaultMessage:"{email} belongs to a ChatGPT Enterprise plan but currently has no access.",description:"Message shown telling the user their email is part of an enterprise workspace."},requestWorkspaceAccessMessage:{id:"RequestWorkspaceAccessModal.requestWorkspaceAccessMessage",defaultMessage:"You may request access to the workspace account.",description:"Message telling the user to request access to the workspace."},requestedWorkspaceAccessMessage:{id:"RequestWorkspaceAccessModal.requestedWorkspaceAccessMessage",defaultMessage:"Successfully requested access to the workspace account. Your workspace administrator at {email} may approve the request.",description:"Message telling the user they have requested access to the workspace."},contactWorkspaceAdminEmail:{id:"RequestWorkspaceAccessModal.contactWorkspaceAdminEmail",defaultMessage:"Could not request access. Contact your workspace administrator at {email} to request access to a new workspace account.",description:"Message telling the user who to contact to create a new account for the workspace."},signOutButton:{id:"RequestWorkspaceAccessModal.signOutButton",defaultMessage:"Sign Out",description:"Label for sign out button on modal"},requestAccessButton:{id:"RequestWorkspaceAccessModal.requestAccessButton",defaultMessage:"Request access",description:"Label for request access button on modal"},activeRequestMessage:{id:"RequestWorkspaceAccessModal.activeRequestMessage",defaultMessage:"You have a pending invite request for this workspace. Contact your workspace administrator at {email} to approve your request.",description:"Message telling the user they have an active request for the workspace."}},P=a(75641),Z=a(88809),I=a(25260),W=a(62509),q=a(19841),E=a(91530),L=a.n(E),R=a(19579),O=a.n(R),U=a(6038),D=a(32367),K=a(52696);function G(e){var t=e.workspace,a=(0,W.kP)().session,n=(0,f.ec)(function(e){return e.currentWorkspace}),o=(null==n?void 0:n.id)===t.id,i=(0,s._)((0,u.useState)(!1),2),c=i[0],l=i[1],d=(0,D.Z)().onEnableHistory,g=(0,u.useCallback)((0,v._)(function(){return(0,w.Jh)(this,function(e){return l(!0),f.w_.setCurrentWorkspace(t),d(),(0,Z.M)(),[2]})}),[t,d]),h=(0,K.GA)(t),p=(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)(U.B0,{})});if(t.structure===P.CZ.PERSONAL){if(!(null==a?void 0:a.user))return null;p=(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)(O(),{alt:"Profile",src:a.user.picture,width:38,height:38,className:"flex items-center justify-center rounded-sm"})})}return(0,r.jsxs)(o?"div":"button",{onClick:o?L():g,className:(0,q.default)({"flex w-full items-center gap-2 rounded-lg border border-gray-100 bg-gray-50 p-4 hover:bg-gray-100 focus:bg-gray-100 dark:border-gray-700 dark:bg-gray-800 dark:hover:bg-gray-700 dark:focus:bg-gray-700":!0,"bg-gray-50 dark:bg-gray-800":o}),children:[(0,r.jsxs)("div",{className:"flex w-full items-center gap-4",children:[p,(0,r.jsx)("div",{className:"inline align-top font-medium",children:h})]}),(0,r.jsx)("div",{className:"flex h-full items-center p-1",children:c?(0,r.jsx)(N.Z,{}):o?(0,r.jsx)(I.Z,{className:"icon-lg"}):(0,r.jsx)(M.Tfp,{className:"icon-lg my-auto"})})]})}function H(e){var t=e.data.map(function(e){return(0,r.jsx)(G,{workspace:e},e.id)});return(0,r.jsx)("div",{className:"flex w-full flex-col gap-2",children:t})}function F(){var e,t,a=(0,K._O)(),n=(0,W.kP)().session,o=null!==(t=null==n?void 0:null===(e=n.user)||void 0===e?void 0:e.email)&&void 0!==t?t:"";if(0===a.length)return null;var s=a.filter(function(e){return e.structure===P.CZ.WORKSPACE});return(0,r.jsx)(T.Z,{isOpen:!0,onClose:L(),type:"success",size:"normal",title:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)(A.Z,(0,k._)({},z.workspaceSwitcherTitle)),(0,r.jsx)("span",{className:"mt-0.5 text-sm text-gray-700 dark:text-gray-400",children:o})]}),children:(0,r.jsxs)("div",{className:"flex w-full flex-col items-center justify-between",children:[(0,r.jsx)(H,{data:a}),(0,r.jsx)("span",{className:"mt-4 text-sm text-gray-700 dark:text-gray-400",children:(0,r.jsx)(A.Z,(0,b._)((0,k._)({},z.workspaceSwitcherDisclaimer),{values:{workspaces:(0,r.jsx)("span",{className:"contents font-bold",children:(0,r.jsx)(y.yX,{value:s.map(function(e){return e.name})})}),numWorkspaces:s.length}}))})]})})}var z=(0,y.vU)({workspaceSwitcherTitle:{id:"workspaceSwitcher.title",defaultMessage:"Select a workspace",description:"title for account switcher modal"},workspaceSwitcherDisclaimer:{id:"workspaceSwitcher.disclaimer",defaultMessage:"You've been added to the {workspaces} {numWorkspaces, plural, one {workspace} other {workspaces}}. You can switch between workspaces at any time.",description:"disclaimer for account switcher modal"}}),Q=a(6948),J=a(50795),X=a(82081),Y=(0,y.vU)({welcomeBack:{id:"existingUserAgeConfirmationModal.welcomeBack",defaultMessage:"Welcome back, Italy!",description:"Title for the age confirmation modal for Italian users"},ageRequirementsButton:{id:"existingUserAgeConfirmationModal.ageRequirementsButton",defaultMessage:"I meet OpenAI's age requirements",description:"Primary button to confirm the user meets the age requirements"},logoutButton:{id:"existingUserAgeConfirmationModal.logoutButton",defaultMessage:"Log out",description:"Secondary button to log out of the platform"},announcementParagraph1:{id:"existingUserAgeConfirmationModal.announcementParagraph1",defaultMessage:"We’re pleased to resume offering ChatGPT in Italy. To continue on ChatGPT, please confirm that you are 18+ or are 13+ and have consent from your parent or guardian to use ChatGPT.",description:"First paragraph of the announcement, explaining the age requirements"},privacyPolicyLink:{id:"existingUserAgeConfirmationModal.privacyPolicyLink",defaultMessage:"Privacy policy",description:"Link to the privacy policy"},helpCenterArticleLink:{id:"existingUserAgeConfirmationModal.helpCenterArticleLink",defaultMessage:"this help center article",description:"Link to the help center article about ChatGPT development"},announcementParagraph2:{id:"existingUserAgeConfirmationModal.announcementParagraph2",defaultMessage:"For information about how we collect and use personal data, please see our {privacyPolicyLink}. For information about how we develop and train ChatGPT, please see {helpCenterArticleLink}.",description:"Second paragraph of the announcement, providing links to more information"}}),$="2023-04-25",V="".concat("oai/apps/hasSeenAgeConfirmationModal","/").concat($);function ee(e){var t=e.onClose,a=(0,m.Z)(),n=(0,u.useCallback)(function(){Q.m.setItem(V,!0),t()},[t]);return(0,u.useEffect)(function(){J.o.logEvent(X.a.ageConfirmationModal,{content:$})},[]),(0,r.jsx)(T.Z,{isOpen:!0,onClose:p.noop,type:"success",title:a.formatMessage(Y.welcomeBack),primaryButton:(0,r.jsx)(B.ZP.Button,{title:a.formatMessage(Y.ageRequirementsButton),color:"primary",onClick:n}),secondaryButton:(0,r.jsx)(B.ZP.Button,{title:a.formatMessage(Y.logoutButton),color:"light",onClick:function(){J.o.logEvent(X.a.clickLogOut,{eventSource:"mouse"}),(0,W.w7)()},className:"border-gray-800 hover:border-gray-700"}),children:(0,r.jsx)(et,{})})}var et=function(){var e=(0,m.Z)();return(0,r.jsx)("div",{className:"mb-6 mt-4 sm:mt-6",children:(0,r.jsxs)("div",{className:"prose prose-invert text-base text-gray-500",children:[(0,r.jsx)("p",{children:(0,r.jsx)(A.Z,(0,k._)({},Y.announcementParagraph1))}),(0,r.jsx)("p",{children:(0,r.jsx)(A.Z,(0,b._)((0,k._)({},Y.announcementParagraph2),{values:{privacyPolicyLink:(0,r.jsx)("a",{href:"https://openai.com/policies/privacy-policy",target:"_blank",className:"text-gray-500 underline",rel:"noreferrer",children:e.formatMessage(Y.privacyPolicyLink)}),helpCenterArticleLink:(0,r.jsx)("a",{href:"https://help.openai.com/en/articles/7842364-how-chatgpt-and-our-language-models-are-developed",target:"_blank",className:"text-gray-500 underline",rel:"noreferrer",children:e.formatMessage(Y.helpCenterArticleLink)})}}))})]})})},ea=a(77311),en=a(88327),eo="oai/apps/hasSeenOnboarding";(n=o||(o={})).Personal="chat",n.Workspace="workspace";var es=function(e){var t=(0,u.useCallback)(function(){Q.m.setItem("".concat(eo,"/").concat(e),new Date().toLocaleDateString("en-CA",{year:"numeric",month:"2-digit",day:"2-digit"}))},[e]),a=(0,s._)((0,u.useState)(null),2),n=a[0],o=a[1];(0,u.useEffect)(function(){var t=Q.m.getItem("".concat(eo,"/").concat(e));o(!!t&&t)},[e]);var r=(0,u.useCallback)(function(){return n?new Date(!0===n?"2022-12-14":n):n},[n]);return(0,u.useMemo)(function(){return{setHasSeenOnboarding:t,getHasSeenOnboardingDate:r}},[r,t])};function er(e){var t=e.onClose,a=e.scope,n=es(a).setHasSeenOnboarding,s=(0,u.useCallback)(function(){t(!0),n()},[t,n]);return a===o.Personal?(0,r.jsx)(ec,{onSubmit:s}):(0,r.jsx)(el,{onSubmit:s})}var ei=function(e){var t=e.icon,a=e.title,n=e.body;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex flex-row items-center gap-1.5",children:[(0,r.jsx)("div",{children:t}),(0,r.jsx)("div",{className:"font-medium text-token-text-primary",children:a})]}),(0,r.jsx)("div",{className:"text-sm text-token-text-secondary",children:n})]})},ec=function(e){var t=e.onSubmit,a=(0,m.Z)();return(0,r.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,r.jsx)(ei,{icon:(0,r.jsx)(en.wP,{isSolid:!0,className:"h-5 w-5 text-green-600"}),title:(0,r.jsx)(A.Z,(0,k._)({},ed.askAway)),body:(0,r.jsx)(A.Z,(0,k._)({},ed.askAwayBody))}),(0,r.jsx)(ei,{icon:(0,r.jsx)(en.NJ,{className:"text-brand-purple"}),title:(0,r.jsx)(A.Z,(0,k._)({},ed.warning)),body:(0,r.jsx)(A.Z,(0,b._)((0,k._)({},ed.warningBody),{values:{article:function(e){return(0,r.jsx)("a",{href:"https://help.openai.com/en/articles/7039943-data-usage-for-consumer-services-faq",target:"_blank",className:"underline",rel:"noopener noreferrer",children:e})}}}))}),(0,r.jsx)(ei,{icon:(0,r.jsx)(en.CJ,{className:"text-orange-300"}),title:(0,r.jsx)(A.Z,(0,k._)({},ed.accuracy)),body:(0,r.jsx)(A.Z,(0,k._)({},ed.accuracyBody))}),(0,r.jsx)("div",{className:"flex flex-row justify-end",children:(0,r.jsx)(B.mH,{title:a.formatMessage(ed.gettingStartedButton),onClick:t,color:"primary"})})]})},el=function(e){var t=e.onSubmit,a=(0,m.Z)(),n=(0,f.ec)(function(e){return e.currentWorkspace}),o=null==n?void 0:n.name;return(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium text-token-text-primary",children:null!=o?(0,r.jsx)(A.Z,(0,k._)({values:{workspaceName:o}},ed.workspaceWelcome)):(0,r.jsx)(A.Z,(0,k._)({},ed.workspaceWelcomeNoName))}),(0,r.jsx)("div",{className:"text-sm text-token-text-secondary",children:(0,r.jsx)(A.Z,(0,k._)({},ed.workspaceWelcomeBody))})]}),(0,r.jsx)(ei,{icon:(0,r.jsx)(ea.Z,{className:"icon-md text-brand-purple"}),title:(0,r.jsx)(A.Z,(0,k._)({},ed.workUse)),body:(0,r.jsx)(A.Z,(0,k._)({},ed.workUseBody))}),(0,r.jsx)(ei,{icon:(0,r.jsx)(en.wP,{isSolid:!0,className:"h-5 w-5 text-green-600"}),title:(0,r.jsx)(A.Z,(0,k._)({},ed.askAway)),body:(0,r.jsx)(A.Z,(0,k._)({},ed.askAwayBody))}),(0,r.jsx)(ei,{icon:(0,r.jsx)(en.CJ,{className:"text-orange-300"}),title:(0,r.jsx)(A.Z,(0,k._)({},ed.accuracy)),body:(0,r.jsx)(A.Z,(0,k._)({},ed.accuracyBody))}),(0,r.jsx)("div",{className:"flex flex-row justify-end",children:(0,r.jsx)(B.mH,{title:a.formatMessage(ed.gettingStartedButton),onClick:t,color:"primary"})})]})},ed=(0,y.vU)({askAway:{id:"onboarding.askAway",defaultMessage:"Ask away",description:"Title for the tip about what ChatGPT can do"},askAwayBody:{id:"onboarding.askAwayBody",defaultMessage:"ChatGPT can answer questions, help you learn, write code, brainstorm together, and much more.",description:"Body copy for the tip about what ChatGPT can do"},warning:{id:"onboarding.warning",defaultMessage:"Don’t share sensitive info",description:"Title for the warning about ChatGPT traning"},warningBody:{id:"onboarding.warningBody",defaultMessage:"Chat history may be reviewed or used to improve our services. Learn more about your choices in our <article>Help Center</article>.",description:"Body copy for the warning about ChatGPT traning"},accuracy:{id:"onboarding.accuracy",defaultMessage:"Check your facts",description:"Title for the warning about ChatGPT inaccuracy"},accuracyBody:{id:"onboarding.accuracyBody",defaultMessage:"While we have safeguards, ChatGPT may give you inaccurate information. It’s not intended to give advice.",description:"Body copy for the warning about ChatGPT inaccuracy"},gettingStartedButton:{id:"onboarding.gettingStartedButton",defaultMessage:"Okay, let’s go",description:"Button to accept the getting started modal"},workspaceWelcome:{id:"onboarding.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} Workspace",description:"Introduction welcome for workspace onboarding"},workspaceWelcomeNoName:{id:"onboarding.workspaceWelcomeNoName",defaultMessage:"Welcome to the your Workspace",description:"Introduction welcome for workspace onboarding when no Workspace name is available"},workspaceWelcomeBody:{id:"onboarding.workspaceWelcomeBody",defaultMessage:"Here you can use our latest models, with more capabilities, and fewer limits.",description:"Introduction welcome body for workspace onboarding"},workUse:{id:"onboarding.workUse",defaultMessage:"Made for use at work",description:"Title for the warning about ChatGPT business workspace use"},workUseBody:{id:"onboarding.workUseBody",defaultMessage:"By default, chats in this workspace are not used to train our AI models.",description:"Body copy for the warning about ChatGPT business workspace use"}}),eu=function(e){var t=e.onClose,a=(0,m.Z)();return(0,r.jsx)(T.Z,{isOpen:!0,onClose:p.noop,type:"success",title:"ChatGPT",description:a.formatMessage(ef.personalOnboardingSubheading),children:(0,r.jsx)(er,{onClose:t,scope:o.Personal})})},eg=function(e){var t=e.onClose;return(0,r.jsx)(T.Z,{isOpen:!0,onClose:p.noop,type:"success",title:"ChatGPT",description:"Enterprise Edition",children:(0,r.jsx)(er,{onClose:t,scope:o.Workspace})})};function eh(e){var t,a,n=e.userCountry,i=(0,s._)((0,u.useState)(0),2),c=i[0],l=i[1],d=es(o.Personal).getHasSeenOnboardingDate,g=es(o.Workspace).getHasSeenOnboardingDate,h=(0,f.ec)(f.F_.isBusinessWorkspace),p=(t=(0,f.hz)(),a=!!Q.m.getItem(V),0===t.size?"loading":"IT"!==n||a?"hide":"show"),m=(0,f.$T)(),y=(0,x.Go)(),v=(0,f.ec)(f.F_.workspaceId),k=(0,f.ec)(f.F_.hasMultipleWorkspaces)&&null==v,b=(0,u.useMemo)(function(){return[{Modal:F,getModalState:function(){return m?"loading":k?"show":"hide"}},{Modal:S,getModalState:function(){return m?"loading":null!==y?"show":"hide"}},{Modal:ee,getModalState:function(){return p}},{Modal:eu,getModalState:function(){if(h)return"hide";var e=d();return null===e?"loading":!1===e?"show":"hide"}},{Modal:eg,getModalState:function(){if(!h)return"hide";var e=g();return null===e?"loading":!1===e?"show":"hide"}}]},[d,g,h,p,m,y,k]);(0,u.useEffect)(function(){b[c]&&"hide"===b[c].getModalState()&&l(b.findIndex(function(e){return"hide"!==e.getModalState()}))},[c,b]);var w=b[c];if(null==w)return null;var j=w.getModalState();if("loading"===j)return null;"hide"===j&&l(function(e){return e+1});var C=b[c].Modal;return(0,r.jsx)(C,{onClose:function(){l(function(e){return e+1})}})}var ef=(0,y.vU)({personalOnboardingSubheading:{id:"BlockingInitialModals.personalOnboardingSubheading",defaultMessage:"Tips for getting started",description:"Subheading for the Personal onbaording modal"}}),ep=a(6780),em=a(46020),ey=a(10664),ex=function(e){var t=e.action;return(0,r.jsxs)("div",{className:"flex items-center justify-between overflow-hidden text-gray-600 dark:text-gray-300",children:[(0,r.jsx)("div",{className:"flex flex-shrink items-center overflow-hidden text-sm",children:(0,r.jsx)("div",{className:"truncate",children:(0,r.jsx)(A.Z,(0,k._)({},t.actionMessageDescriptor))})}),(0,r.jsx)("div",{className:"ml-3 flex flex-row gap-2",children:(0,ey.A3)(t.keyboardBinding).map(function(e,a){return(0,r.jsx)(ev,{keyName:e},"".concat(t.key,"-").concat(a))})})]})},ev=function(e){var t=e.keyName,a=(0,q.default)("my-2 flex h-8 items-center justify-center rounded-[4px] border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300");return t.length>1?t.length>3?(0,r.jsx)("div",{className:(0,q.default)(a,"min-w-[50px]"),children:(0,r.jsx)("span",{className:"text-xs",children:t})}):(0,r.jsx)("div",{className:(0,q.default)(a,"min-w-[32px]"),children:(0,r.jsx)("span",{className:"text-xs",children:t})}):(0,r.jsx)("div",{className:(0,q.default)(a,"min-w-[32px]"),children:(0,r.jsx)("span",{className:"text-sm",children:t})})},ek=(0,y.vU)({keyboardActionsModalTitle:{id:"KeyboardActionsModal.keyboardActionsModalTitle",defaultMessage:"Keyboard shortcuts",description:"Title of the keyboard shortcuts modal"}}),eb=function(){var e=(0,m.Z)(),t=(0,em.tN)(function(e){return e.activeModals.has(em.B.KeyboardActions)}),a=function(){em.vm.closeModal(em.B.KeyboardActions)},n=(0,ey.JS)(),o=(0,u.useMemo)(function(){var e=Math.ceil(n.length/2);return[n.slice(0,e),n.slice(e)]},[n]);return(0,r.jsx)(T.Z,{isOpen:t,onClose:a,type:"success",size:"custom",className:"md:max-w-[672px] lg:max-w-[796px] xl:max-w-4xl",closeButton:(0,r.jsx)(B.ZP.CloseButton,{onClose:a}),title:e.formatMessage(ek.keyboardActionsModalTitle),children:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"grid grid-flow-row grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-x-9",children:o.map(function(e,t){return(0,r.jsx)("div",{className:"flex flex-col overflow-hidden",children:e.map(function(e){return(0,r.jsx)(ex,{action:e},e.key)})},"col-".concat(t))})})})})},ew=Symbol("invalid path");function ej(e){var t,a=e.split(/[#?]/)[0];if("/"!==a){var n=/\/c\/([a-f0-9-]+)/.exec(a);return null!==(t=null==n?void 0:n[1])&&void 0!==t?t:ew}}function eC(e){var t=e.urlThreadId,a=e.clientThreadId,n=e.isUserInCanPayGroup,o=e.serviceStatus,p=e.serviceAnnouncement,m=e.userCountry,y=(0,s._)((0,u.useState)(function(){return void 0!==t?t:void 0!==a?a:(0,h.OX)()}),2),x=y[0],v=y[1];void 0!==t&&x!==t&&h.tQ.getServerThreadId(x)!==t&&v(t),void 0!==t||(0,h.Zz)(x)||v((0,h.OX)());var k=(0,f.$T)(),b=(0,f.WY)(),w=(0,f.ec)(f.F_.workspaceId),j=(0,c.g)(function(e){return e.updateFlagValue}),C=(0,f.hz)(),M=C.has(g.PL),A=C.has(g.rX);(0,u.useEffect)(function(){M&&(d.Z.setPrefetchEnabled(A),d.Z.gatherData())},[M,A]),(0,u.useEffect)(function(){void 0!==n&&j("isUserInCanPayGroup",n)},[j,n]),(0,u.useEffect)(function(){(null==o?void 0:o.type)&&!1===b&&i.m.warning(o.message,{hasCloseButton:!0,duration:5})},[b,null==o?void 0:o.message,null==o?void 0:o.type]);var B=(0,u.useRef)(!1);return(0,u.useEffect)(function(){if(!k){var e=b?p.paid:p.public;if((null==e?void 0:e.type)&&(null==e?void 0:e.message)&&!B.current){B.current=!0;var t=e.message,a={hasCloseButton:!0,duration:15};switch(e.type){case"danger":i.m.danger(t,a);break;case"info":i.m.info(t,a);break;case"warning":i.m.warning(t,a)}}}},[p,k,b]),(0,r.jsxs)(l.gB.Provider,{value:null,children:[(0,r.jsx)(eh,{userCountry:m},w),(0,r.jsx)(eb,{}),(0,r.jsx)(ep.Z,{clientThreadId:x,setClientThreadId:v})]})}},6780:function(e,t,a){a.d(t,{Z:function(){return _}});var n=a(39324),o=a(35250),s=a(13995),r=a(60554),i=a(70079),c=a(1454),l=a(32004),d=a(94968),u=a(95137),g=a(37334),h=a(46020),f=a(78931),p=a(32542),m=a(28735),y=a(10664),x=a(33669),v=a(2166),k=a(41932),b=a(61402),w=a(80267),j=a(56932),C=a(82816),M=a(52481),A=a(82277),B=a(13090),T=a(9664),N=a(2295),S=a(42569);function _(e){var t,a=e.clientThreadId,n=e.setClientThreadId,l=e.initiallyHighlightedMessageId,d=e.continueConversationUrl,v=null!==(0,i.useContext)(p.gB);(0,g.ax)(a);var k=(0,g.XK)(a),_=(0,r.useRouter)(),Z=(0,f.hz)(),I=(0,g.UL)(a),W=(0,i.useContext)(p.QL).historyDisabled,q=(0,S.Xy)(I.lastModelUsed,a),E=(0,s.NL)();(0,i.useEffect)(function(){return g.tQ.retainThread(a),function(){setTimeout(function(){E.invalidateQueries(["conversation",a])},0),g.tQ.releaseThread(a)}},[a,E]),(0,i.useEffect)(function(){h.vm.closeSharingModal()},[a,k]);var L=(0,i.useCallback)(function(){n((0,g.OX)()),_.replace(q.tags.includes(S.S.GPT_4)?"/":"/?model=".concat(q.id),void 0,{shallow:!0})},[n,q.tags,q.id,_]);(0,y.yx)({resetThreadAction:L,clientThreadId:a});var R=(0,h.tN)(function(e){return e.activeSidebar}),O=(0,x.w$)();(0,i.useEffect)(function(){return function(){b.hx.abortAllRequests()}},[a]),t=(0,f.hz)().has("debug"),(0,i.useEffect)(function(){if(t)return(0,m.eR)(document,{keydown:function(e){e.target instanceof HTMLElement&&["input","textarea","select","button"].includes(e.target.tagName.toLowerCase())||"\\"!==e.key||h.vm.toggleActiveSidebar("debug")}})},[t]);var U=(0,N.iF)(),D=(0,i.useCallback)(function(){u.ZP.deleteConversations().then(function(){U()}),L(),"/"!==_.asPath&&_.replace({pathname:"/"},void 0,{shallow:!0})},[L,U,_]),K=(0,i.useRef)(I.threadId);return(0,i.useEffect)(function(){I.threadId!==K.current&&(h.vm.setActiveSidebar(!1),K.current=I.threadId),b.hx.clear()},[I.threadId]),(0,o.jsxs)(A.Z,{showNavigation:!v,renderTitle:(0,o.jsx)(P,{clientThreadId:a}),renderMobileHeaderRightContent:(0,o.jsx)(B.js,{onClick:L,children:W?(0,o.jsx)(c.Bw1,{className:"icon-lg"}):(0,o.jsx)(c.OvN,{className:"icon-lg"})}),renderSidebar:(0,o.jsx)(j.Z,{onDeleteHistory:D,onNewThread:L,children:(0,o.jsx)(w.Z,{activeId:W?void 0:k,onNewThread:L})}),children:[(0,o.jsx)(T.Z,{initialThreadData:I,clientThreadId:a,initiallyHighlightedMessageId:l,continueConversationUrl:d},a),(0,o.jsxs)(A.Z.Sidebars,{children:[Z.has("debug")&&"debug"===R&&(0,o.jsx)(M.fv,{clientThreadId:a,slideOver:!O,onClose:function(){return h.vm.toggleActiveSidebar("debug")},isOpen:!0}),Z.has("tools3_dev")&&(0,o.jsx)(C.ZP,{slideOver:!O})]})]})}function P(e){var t,a=e.clientThreadId,s=null!==(t=g.tQ.getTitle(a))&&void 0!==t?t:"New chat",r=(0,v.Z)(a,s,!0),d=r.resolvedTitle,u=r.isTypingEffect,h=(0,i.useContext)(p.QL),f=h.historyDisabled,m=h.toggleHistoryDisabled;return(0,o.jsx)(o.Fragment,{children:f?(0,o.jsxs)("button",{className:"flex cursor-pointer flex-row place-items-center items-center justify-center gap-3",onClick:function(){return m()},children:[(0,o.jsx)(c.$IY,{className:"icon-sm"}),(0,o.jsx)(l.Z,(0,n._)({},Z.enableChatHistory))]}):u&&null!=d?(0,o.jsx)(k.Z,{text:d}):null!=d?d:(0,o.jsx)(l.Z,(0,n._)({},Z.newChat))})}var Z=(0,d.vU)({enableChatHistory:{id:"navigation.enableChatHistory",defaultMessage:"Enable chat history",description:"Enable chat history button label"},newChat:{id:"navigation.newChat",defaultMessage:"New chat",description:"New chat header title"}})},10664:function(e,t,a){a.d(t,{A3:function(){return S},yx:function(){return W},JS:function(){return I}});var n,o,s,r=a(96237),i=a(39324),c=a(81949),l=a(15858),d=a(11084),u=a(82534),g=a(50795),h=a(82081),f=a(61888),p=a(70079),m=a(94968),y=a(95954),x=a(33976),v=a(88798),k=a(32877),b=a(37334),w=a(46020),j=a(78931),C=a(52787),M=a(45248),A=p.useLayoutEffect,B=RegExp("```.*?\\n([\\s\\S]+?)\\n?```[^`]*$","gms");(n=o||(o={})).Core="Core",n.Chat="Chat",n.Settings="Settings";var T=(0,i._)({Mod:"mod",Comma:","},l.s),N=(s={},(0,r._)(s,T.Mod,/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)?"⌘":"Ctrl"),(0,r._)(s,T.Comma,","),(0,r._)(s,T.Enter,"⏎"),(0,r._)(s,T.Escape,"Esc"),(0,r._)(s,T.ArrowUp,"↑"),(0,r._)(s,T.ArrowDown,"↓"),(0,r._)(s,T.ArrowLeft,"←"),(0,r._)(s,T.ArrowRight,"→"),(0,r._)(s,T.Backspace,"⌫"),(0,r._)(s,T.Delete,"⌦"),(0,r._)(s,T.Tab,"⇥"),(0,r._)(s,T.Control,"Ctrl"),(0,r._)(s,T.Shift,"Shift"),s),S=function(e){var t;return e.map(function(e){return null!==(t=N[e])&&void 0!==t?t:e})},_=(0,m.vU)({newChat:{id:"keyboardActions.newChat",defaultMessage:"Open new chat",description:"Keyboard shortcut to open a new chat"},focusPromptTextarea:{id:"keyboardActions.focusPromptTextarea",defaultMessage:"Focus chat input",description:"Keyboard shortcut to focus the chat input"},copyLastCodeBlock:{id:"keyboardActions.copyLastCodeBlock",defaultMessage:"Copy last code block",description:"Keyboard shortcut to copy the last code block in the chat"},copyLastResponse:{id:"keyboardActions.copyLastResponse",defaultMessage:"Copy last response",description:"Keyboard shortcut to copy the last response in the chat"},toggleCustomInstructions:{id:"keyboardActions.toggleCustomInstructions",defaultMessage:"Set custom instructions",description:"Keyboard shortcut to toggle custom instructions"},navigationToggle:{id:"keyboardActions.navigationToggle",defaultMessage:"Toggle sidebar",description:"Keyboard shortcut to toggle navigation"},deleteChat:{id:"keyboardActions.deleteChat",defaultMessage:"Delete chat",description:"Keyboard shortcut to delete chat"},toggleKeyboardActions:{id:"keyboardActions.toggleKeyboardActions",defaultMessage:"Show shortcuts",description:"Keyboard shortcut to toggle keyboard actions"}}),P=function(e){var t=e.resetThreadAction,a=e.clientThreadId,n=e.features;return[{key:"newChat",action:t||f.noop,actionMessageDescriptor:_.newChat,group:o.Core,keyboardBinding:[T.Mod,T.Shift,"o"],altKeyboardBindings:[[T.Mod,"k"]]},{key:"focusPromptTextarea",action:x.go,actionMessageDescriptor:_.focusPromptTextarea,group:o.Chat,keyboardBinding:[T.Shift,T.Escape]},{key:"copyLastCodeBlock",action:function(){if(null!=a)for(var e=b.tQ.getThreadCurrentLeafId(a),t=b.tQ.getThreadConversationTurns(a,e),n=t.length-1;n>=0;n--){var o=t[n].messages.reduce(function(e,t){return null==t.err&&t.message.author.role===y.uU.Assistant&&"all"===t.message.recipient?e+(e?"\n\n":"")+(0,C.RR)(t.message):e},""),s=(0,c._)(o.matchAll(B)),r=s.length?s[s.length-1][1]:null;if(null!=r){(0,d.S)(r).then(function(){v.m.success("Copied code block to clipboard")});break}}},actionMessageDescriptor:_.copyLastCodeBlock,group:o.Chat,keyboardBinding:[T.Mod,T.Shift,";"],altKeyboardBindings:[[T.Mod,T.Shift,":"]]},{key:"copyLastResponse",action:function(){null!=a&&b.tQ.copyLastMessageToClipboard(a,"keyboard").then(function(){v.m.success("Last response copied to clipboard")})},actionMessageDescriptor:_.copyLastResponse,group:o.Chat,keyboardBinding:[T.Mod,T.Shift,"c"]},{key:"toggleCustomInstructions",action:function(){return w.vm.toggleModal(w.B.UserContext)},actionMessageDescriptor:_.toggleCustomInstructions,group:o.Settings,keyboardBinding:[T.Mod,T.Shift,"i"],enabled:n.has(k.Rw)||n.has(k.uo)},{key:"navigationToggle",action:function(){return w.vm.toggleDesktopNavCollapsed()},actionMessageDescriptor:_.navigationToggle,group:o.Core,keyboardBinding:[T.Mod,T.Shift,"s"]},{key:"deleteChat",action:function(){return w.vm.toggleModal(w.B.DeleteChatConfirmation)},actionMessageDescriptor:_.deleteChat,group:o.Chat,keyboardBinding:[T.Mod,T.Shift,T.Backspace],altKeyboardBindings:[[T.Mod,T.Shift,T.Delete]]},{key:"toggleKeyboardActions",action:function(){return w.vm.toggleModal(w.B.KeyboardActions)},actionMessageDescriptor:_.toggleKeyboardActions,group:o.Settings,keyboardBinding:[T.Mod,"/"]}]},Z=function(e){var t,a,n,o=(0,j.hz)().has(k.rk);return t=function(e){g.o.logEvent(h.a.keyboardShortcut,{keyboardActionKey:e.key}),u.U.addAction("chatgpt_keyboard_shortcut",{keyboardActionKey:e.key})},a={enabled:o},n=e.map(function(e){var t=e.keyboardBinding.join("+");if(e.altKeyboardBindings){t=[t];var a=e.altKeyboardBindings.map(function(e){return e.join("+")});t=t.concat(a)}return(0,M.ZP)(t,{byKey:!0})}),void A(function(){if((null==a?void 0:a.enabled)!==!1){var o=function(a){if(!a.repeat)for(var o=0;o<n.length;o++)n[o](a)&&(void 0===e[o].enabled||e[o].enabled)&&(a.preventDefault(),t(e[o]),e[o].action())},s=function(e){void 0!==e.key&&o(e)},r=document;return r.addEventListener("keydown",s),function(){r.removeEventListener("keydown",s)}}},[e,a])},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.resetThreadAction,a=e.clientThreadId,n=(0,j.hz)();return(0,p.useMemo)(function(){return P({features:n,resetThreadAction:t,clientThreadId:a}).filter(function(e){var t=e.enabled;return void 0===t||t})},[a,n,t])},W=function(e){Z(I({resetThreadAction:e.resetThreadAction,clientThreadId:e.clientThreadId}))}}}]);